# .stagefreight.yml — Helm Chart / Infrastructure-as-Code
#
# Who: Teams publishing Helm charts, Terraform modules, Ansible collections,
#      Kustomize overlays, or any IaC that gets versioned and distributed.
# What: No container build. Focus on linting, testing, packaging, and publishing
#       the chart/module to its registry. Release notes and badge management.
# Build: None (container-wise). Chart packaging is a sanity check.
# Why: IaC repos need the same hygiene — release notes, security scanning of
#      embedded images/dependencies, license compliance, golden file sync.

version: 1

targets:
  - id: primary-release
    kind: release
    when: { git_tags: ["re:.*"], events: [tag] }

security:
  enabled: true

# ── Roadmap (not yet implemented) ──────────────────────────────
# security:
#   audit_deps: true
#
# license:
#   compliance: true
#
# templates:
#   golden_files: true
#   gitignore: true
#
# docs:
#   readme_inputs: true
#
# flair:
#   badges: auto
#
# dev:
#   test:
#     sanity:
#       - { name: lint, run: "helm lint charts/my-chart" }
#       - { name: template, run: "helm template my-chart charts/my-chart --values tests/values-test.yaml" }
#       - { name: kubeval, run: "helm template my-chart charts/my-chart | kubeval --strict" }
#       - { name: package, run: "helm package charts/my-chart --destination dist/" }
